{"remainingRequest":"/Users/nile/Blob/client/node_modules/babel-loader/lib/index.js!/Users/nile/Blob/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nile/Blob/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nile/Blob/client/src/views/Message.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nile/Blob/client/src/views/Message.vue","mtime":1670838336342},{"path":"/Users/nile/Blob/client/node_modules/cache-loader/dist/cjs.js","mtime":1670838335003},{"path":"/Users/nile/Blob/client/node_modules/babel-loader/lib/index.js","mtime":1670838334849},{"path":"/Users/nile/Blob/client/node_modules/cache-loader/dist/cjs.js","mtime":1670838335003},{"path":"/Users/nile/Blob/client/node_modules/vue-loader/lib/index.js","mtime":1670838336149}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9uaWxlL0Jsb2IvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL25pbGUvQmxvYi9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNZXNzYWdlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGV4dGFyZWE6ICIiLAogICAgICBzaG93RW1vamk6IGZhbHNlLAogICAgICBlbW9qaTogWyLwn5iDIiwgIvCfmIEiLCAi8J+YgiIsICLwn5iKIiwgIvCfmYMiLCAi8J+lsCIsICLwn5iYIiwgIvCfpK0iLCAi8J+klCIsICLwn5iPIiwgIvCfmLUiLCAi8J+YnyIsICLwn5mBIiwgIvCfmLMiLCAi8J+YsCIsICLwn5itIiwgIvCfmJYiLCAi8J+YoSIsICLwn5igIiwgIvCfmIgiLCAi8J+koSIsICLimKDvuI8iLCAi8J+RuyIsICLwn5mIIiwgIvCfmYkiLCAi4p2k77iPIiwgIvCfkpYiLCAi8J+SoiIsICLwn5KjIiwgIvCfkqQiLCAi8J+RiyIsICLwn5GNIiwgIvCfkYwiLCAi8J+kniIsICLwn6SfIiwgIvCfpJkiLCAi8J+RiiIsICLwn5aVIiwgIvCfpJ0iLCAi8J+ZjyIsICLwn5mFIiwgIvCfmYXigI3imYLvuI8iLCAi8J+RqOKAjeKciO+4jyIsICLwn5Gp4oCN4pyI77iPIiwgIvCfkbciLCAi8J+Rt+KAjeKZgO+4jyIsICLwn6SmIiwgIvCfpKbigI3imYLvuI8iLCAi8J+RtCIsICLwn6eTIiwgIvCfkLQiLCAi8J+QriIsICLwn5CWIiwgIvCfkJEiLCAi8J+QkyIsICLwn6aaIiwgIvCfkLIiLCAi8J+QsyIsICLwn5CfIiwgIvCfkIwiXSwKICAgICAgbXNnRGF0YTogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoWyd1c2VySW5mbyddKSksCiAgbWV0aG9kczogewogICAgLy/liIfmjaJlbW9qaeeahOaYvuekuuS4jumakOiXjwogICAgaGFuZGxlVG9nZ2xlRW1vamk6IGZ1bmN0aW9uIGhhbmRsZVRvZ2dsZUVtb2ppKCkgewogICAgICB0aGlzLnNob3dFbW9qaSA9ICF0aGlzLnNob3dFbW9qaTsKICAgIH0sCiAgICAvL+eCueWHu+avj+S4gOS4qmVtb2pp55qE5pe25YCZ77yM5Yqg5YWlaW5wdXQKICAgIGhhbmRsZUVtb2ppQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUVtb2ppQ2xpY2soaXRlbSkgewogICAgICB0aGlzLnRleHRhcmVhICs9IGl0ZW07CiAgICAgIHRoaXMuc2hvd0Vtb2ppID0gZmFsc2U7CiAgICB9LAogICAgLy/nlZnoqIDmj5DkuqQKICAgIGhhbmRsZU1zZ1N1Ym1pdDogZnVuY3Rpb24gaGFuZGxlTXNnU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgbXNnLCB1c2VySWQsIF95aWVsZCRfdGhpcyQkYXhpb3MsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG1zZyA9IF90aGlzLnRleHRhcmVhLnRyaW0oKTsKICAgICAgICAgICAgICAgIHVzZXJJZCA9IF90aGlzLnVzZXJJbmZvLl9pZDsgLy/mo4DmtYvnlKjmiLfmmK/lkKbnmbvlvZUKCiAgICAgICAgICAgICAgICBpZiAodXNlcklkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+35YWI55m75b2VIikpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBpZiAobXNnKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+35YWI6L6T5YWl55WZ6KiA5YaF5a65IikpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kYXhpb3MoewogICAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgICAgICAgdXJsOiAiL21zZyIsCiAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICBtc2c6IG1zZywKICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJJZAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3lpZWxkJF90aGlzJCRheGlvcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJF90aGlzJCRheGlvcy5kYXRhOwoKICAgICAgICAgICAgICAgIGlmICghKGRhdGEuY29kZSAhPT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLm1zZykpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgLy/nlZnoqIDmiJDlip8KICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi55WZ6KiA5Y+R6KGo5oiQ5YqfIiwKICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoKSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvL+ivt+axgueVmeiogOaVsOaNrgogICAgZ2V0TXNnTGlzdDogZnVuY3Rpb24gZ2V0TXNnTGlzdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3lpZWxkJF90aGlzMiQkYXhpb3MsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRheGlvcyh7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgICAgICAgICAgIHVybDogIi9tc2ciCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJF90aGlzMiQkYXhpb3MgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkX3RoaXMyJCRheGlvcy5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICBkYXRhLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAvL+eUqOadpeihqOekuuavj+S4gOadoeeVmeiogOeahOWbnuWkjei+k+WFpeahhueahOWGheWuuQogICAgICAgICAgICAgICAgICBpdGVtLnJlcGx5VHh0ID0gIiI7IC8v55So5p2l6KGo56S65Zue5aSN55qE5piv5ZOq5LiqCgogICAgICAgICAgICAgICAgICBpdGVtLnJlcGx5VXNlciA9IF9vYmplY3RTcHJlYWQoe30sIGl0ZW0udXNlcik7IC8v55So5p2l6KGo56S65b2T5YmN55WZ6KiA55qE5Zue5aSN5qGG6KaB5LiN6KaB5omT5byACgogICAgICAgICAgICAgICAgICBpdGVtLmlzU2hvd1JlcGx5ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF90aGlzMi5tc2dEYXRhID0gZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy9saWtl54K55Ye7CiAgICBoYW5kbGVMaWtlc0NsaWNrOiBmdW5jdGlvbiBoYW5kbGVMaWtlc0NsaWNrKGl0ZW0sIHRoaXNJdGVtLCBjaGlsZEluZGV4KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHVzZXJJZCwgbGlrZXMsIGluZGV4OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvL+aYr+WQpueZu+W9lQogICAgICAgICAgICAgICAgdXNlcklkID0gX3RoaXMzLnVzZXJJbmZvLl9pZDsKCiAgICAgICAgICAgICAgICBpZiAodXNlcklkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIF90aGlzMy4kbWVzc2FnZS5lcnJvcigi6K+35YWI55m75b2VIikpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAvL+aYr+eCuei1nui/mOaYr+WPlua2iOi1ngogICAgICAgICAgICAgICAgbGlrZXMgPSB0aGlzSXRlbS5saWtlczsKICAgICAgICAgICAgICAgIGluZGV4ID0gbGlrZXMuaW5kZXhPZih1c2VySWQpOwoKICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgLy/lj5bmtojotZ4KICAgICAgICAgICAgICAgICAgbGlrZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIC8v54K56LWeCiAgICAgICAgICAgICAgICAgIGxpa2VzLnB1c2godXNlcklkKTsKICAgICAgICAgICAgICAgIH0gLy/lj5HpgIHliLDlkI7nq68KCgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy4kYXhpb3MoewogICAgICAgICAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgICAgICAgICAgdXJsOiAiL21zZy9saWtlIiwKICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgIHBhcmVudElkOiBpdGVtLl9pZCwKICAgICAgICAgICAgICAgICAgICBjaGlsZElkOiB0aGlzSXRlbS5faWQsCiAgICAgICAgICAgICAgICAgICAgbGlrZXM6IGxpa2VzLAogICAgICAgICAgICAgICAgICAgIGNoaWxkSW5kZXg6IGNoaWxkSW5kZXgKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8v5Zue5aSN5oyJ6ZKu54K55Ye7CiAgICBoYW5kbGVSZXBseUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVSZXBseUNsaWNrKGl0ZW0sIHRoaXNJdGVtKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoISh0aGlzSXRlbS51c2VyLl9pZCA9PT0gaXRlbS5yZXBseVVzZXIuX2lkICYmIGl0ZW0uaXNTaG93UmVwbHkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaXRlbS5pc1Nob3dSZXBseSA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBpdGVtLnJlcGx5VXNlciA9IHRoaXNJdGVtLnVzZXI7CiAgICAgICAgICAgICAgICBpdGVtLmlzU2hvd1JlcGx5ID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy/lm57lpI3moYbmj5DkuqQKICAgIGhhbmRsZVJlcGx5SW5wdXRDbGljazogZnVuY3Rpb24gaGFuZGxlUmVwbHlJbnB1dENsaWNrKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgbXNnLCB1c2VyLCByZXBseSwgbXNnSWQsIGNoaWxkLCBfeWllbGQkX3RoaXM0JCRheGlvcywgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8v5Zue5aSN55qE5YaF5a65CiAgICAgICAgICAgICAgICBtc2cgPSBpdGVtLnJlcGx5VHh0LnRyaW0oKTsgLy/lvZPliY3nmbvlvZXnmoTnlKjmiLdpZCAtLSDlm57lpI3kurppZAoKICAgICAgICAgICAgICAgIHVzZXIgPSBfdGhpczQudXNlckluZm8uX2lkOyAvL+WbnuWkjeeahOaYr+iwgQoKICAgICAgICAgICAgICAgIHJlcGx5ID0gaXRlbS5yZXBseVVzZXIuX2lkOwoKICAgICAgICAgICAgICAgIGlmIChtc2cpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgX3RoaXM0LiRtZXNzYWdlLmVycm9yKCLor7flhYjovpPlhaXlm57lpI3lhoXlrrkiKSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIF90aGlzNC4kbWVzc2FnZS5lcnJvcigi6K+35YWI55m75b2V77yBIikpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBtc2dJZCA9IGl0ZW0uX2lkLCBjaGlsZCA9IHsKICAgICAgICAgICAgICAgICAgbXNnOiBtc2csCiAgICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIsCiAgICAgICAgICAgICAgICAgIHJlcGx5OiByZXBseQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LiRheGlvcyh7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICAgICAgICB1cmw6ICIvbXNnL3JlcGx5IiwKICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgIG1zZ0lkOiBtc2dJZCwKICAgICAgICAgICAgICAgICAgICBjaGlsZDogY2hpbGQKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfeWllbGQkX3RoaXM0JCRheGlvcyA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRfdGhpczQkJGF4aW9zLmRhdGE7CgogICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5jb2RlICE9PSAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgX3RoaXM0LiRtZXNzYWdlLmVycm9yKGRhdGEuY29kZSkpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgLy/lm57lpI3miJDlip8KICAgICAgICAgICAgICAgIF90aGlzNC4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuWbnuWkjeaIkOWKnyIsCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbiBvbkNsb3NlKCkgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXM1LnNob3dFbW9qaSA9IGZhbHNlOwogICAgfSk7CiAgICB0aGlzLmdldE1zZ0xpc3QoKTsKICB9Cn07"},{"version":3,"sources":["Message.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"Message\">\r\n    <article class=\"title\">\r\n      <h2>留言板</h2>\r\n      <p>请文明发言，禁止广告。不然拉黑了嗷\\(^o^)/~</p>\r\n      <el-input\r\n        type=\"textarea\"\r\n        :rows=\"2\"\r\n        placeholder=\"请输入内容\"\r\n        maxlength=\"100\"\r\n        show-word-limit\r\n        v-model=\"textarea\">\r\n      </el-input>\r\n      <div class=\"btn\">\r\n        <i\r\n          class=\"iconfont icon-biaoqing\"\r\n          @click.stop=\"handleToggleEmoji\"\r\n        ></i>\r\n        <el-button\r\n          type=\"primary\"\r\n          size=\"mini\"\r\n          @click=\"handleMsgSubmit\"\r\n        >发表\r\n        </el-button>\r\n        <div\r\n          v-show=\"showEmoji\"\r\n          @click.stop\r\n          class=\"emoji\">\r\n          <ul>\r\n            <li\r\n              v-for=\"item in emoji\"\r\n              @click=\"handleEmojiClick(item)\"\r\n            >\r\n              {{ item }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"clear\"></div>\r\n      </div>\r\n    </article>\r\n    <article class=\"content\">\r\n      <ul>\r\n        <li v-for=\"item in msgData\">\r\n          <!--父留言-->\r\n          <div class=\"parent\">\r\n            <!--留言-->\r\n            <div class=\"left\">\r\n              <img :src=\"urlBase+item.user.face\" alt=\"\">\r\n            </div>\r\n            <div class=\"right\">\r\n              <div class=\"name-time\">\r\n                <span>{{ item.user.user }}</span>\r\n                <span>{{ item.time | fmtTime }}</span>\r\n              </div>\r\n              <div class=\"message\">\r\n                {{ item.msg }}\r\n              </div>\r\n              <div class=\"like-reply\">\r\n                <i\r\n                  class=\"like iconfont icon-xinaixin\"\r\n                  :class=\"{\r\n                    isLike: item.likes.indexOf(userInfo._id) !== -1\r\n                  }\"\r\n                  @click=\"handleLikesClick(item, item)\"\r\n                ></i>\r\n                <span>{{ item.likes.length }}</span>\r\n                <i\r\n                  class=\"reply iconfont icon-huifu\"\r\n                  @click=\"handleReplyClick(item, item)\"\r\n                ></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!--子留言-->\r\n          <div class=\"child\" v-for=\"(childItem,childIndex) in item.children\">\r\n            <div class=\"left\">\r\n              <img :src=\"urlBase+childItem.user.face\" alt=\"\">\r\n            </div>\r\n            <div class=\"right\">\r\n              <div class=\"name-time\">\r\n                <span>{{ childItem.user.user }}</span>\r\n                <span>{{ childItem.time | fmtTime }}</span>\r\n              </div>\r\n              <div class=\"message\">\r\n                <span>@{{ childItem.reply.user }}</span>\r\n                {{ childItem.msg }}\r\n              </div>\r\n              <div class=\"like-reply\">\r\n                <i\r\n                  class=\"like iconfont icon-xinaixin\"\r\n                  :class=\"{\r\n                    isLike: childItem.likes.indexOf(userInfo._id) !== -1\r\n                  }\"\r\n                  @click=\"handleLikesClick(item, childItem, childIndex)\"\r\n                ></i>\r\n                <span>{{ childItem.likes.length }}</span>\r\n                <i\r\n                  class=\"reply iconfont icon-huifu\"\r\n                  @click=\"handleReplyClick(item, childItem)\"\r\n                ></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!--回复框-->\r\n          <div\r\n            class=\"replyInput\"\r\n            :class=\"{\r\n              'show': item.isShowReply\r\n            }\"\r\n          >\r\n            <el-input\r\n              v-model=\"item.replyTxt\"\r\n              :placeholder=\"'@'+item.replyUser.user\"\r\n              size=\"mini\"\r\n            ></el-input>\r\n            <el-button\r\n              class=\"replyBtn\"\r\n              type=\"primary\"\r\n              size=\"mini\"\r\n              @click=\"handleReplyInputClick(item)\"\r\n            >回复\r\n            </el-button>\r\n            <div class=\"clear\"></div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </article>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from \"vuex\"\r\n\r\nexport default {\r\n  name: \"Message\",\r\n  data() {\r\n    return {\r\n      textarea: \"\",\r\n      showEmoji: false,\r\n      emoji: [\r\n        \"😃\", \"😁\", \"😂\", \"😊\", \"🙃\", \"🥰\", \"😘\", \"🤭\", \"🤔\", \"😏\",\r\n        \"😵\", \"😟\", \"🙁\", \"😳\", \"😰\", \"😭\", \"😖\", \"😡\", \"😠\", \"😈\",\r\n        \"🤡\", \"☠️\", \"👻\", \"🙈\", \"🙉\", \"❤️\", \"💖\", \"💢\", \"💣\", \"💤\",\r\n        \"👋\", \"👍\", \"👌\", \"🤞\", \"🤟\", \"🤙\", \"👊\", \"🖕\", \"🤝\", \"🙏\",\r\n        \"🙅\", \"🙅‍♂️\", \"👨‍✈️\", \"👩‍✈️\", \"👷\", \"👷‍♀️\", \"🤦\", \"🤦‍♂️\", \"👴\", \"🧓\",\r\n        \"🐴\", \"🐮\", \"🐖\", \"🐑\", \"🐓\", \"🦚\", \"🐲\", \"🐳\", \"🐟\", \"🐌\",\r\n      ],\r\n      msgData: []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['userInfo'])\r\n  },\r\n  methods: {\r\n    //切换emoji的显示与隐藏\r\n    handleToggleEmoji() {\r\n      this.showEmoji = !this.showEmoji\r\n    },\r\n\r\n    //点击每一个emoji的时候，加入input\r\n    handleEmojiClick(item) {\r\n      this.textarea += item\r\n      this.showEmoji = false\r\n    },\r\n\r\n    //留言提交\r\n    async handleMsgSubmit() {\r\n\r\n      let msg = this.textarea.trim()\r\n      let userId = this.userInfo._id\r\n      //检测用户是否登录\r\n      if (!userId) {\r\n        return this.$message.error(\"请先登录\")\r\n      }\r\n      //检测留言内容是否为空\r\n      if (!msg) {\r\n        return this.$message.error(\"请先输入留言内容\")\r\n      }\r\n\r\n      //向后端发请求\r\n      let {data} = await this.$axios({\r\n        method: 'post',\r\n        url: \"/msg\",\r\n        data: {msg, userId}\r\n      })\r\n\r\n      if (data.code !== 0) {\r\n        return this.$message.error(data.msg)\r\n      }\r\n\r\n      //留言成功\r\n      this.$message({\r\n        type: \"success\",\r\n        message: \"留言发表成功\",\r\n        duration: 1000,\r\n        onClose() {\r\n          window.location.reload()\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    //请求留言数据\r\n    async getMsgList() {\r\n      let {data: {data}} = await this.$axios({\r\n        method: 'get'\r\n        , url: \"/msg\"\r\n      })\r\n\r\n      data.filter(item => {\r\n        //用来表示每一条留言的回复输入框的内容\r\n        item.replyTxt = \"\"\r\n        //用来表示回复的是哪个\r\n        item.replyUser = {...item.user}\r\n        //用来表示当前留言的回复框要不要打开\r\n        item.isShowReply = false\r\n      })\r\n\r\n      this.msgData = data\r\n    },\r\n\r\n    //like点击\r\n    async handleLikesClick(item, thisItem, childIndex) {\r\n      //是否登录\r\n      let userId = this.userInfo._id\r\n      if (!userId){\r\n        return this.$message.error(\"请先登录\")\r\n      }\r\n      //是点赞还是取消赞\r\n      let likes = thisItem.likes\r\n      let index = likes.indexOf(userId)\r\n      if (index !== -1){\r\n        //取消赞\r\n        likes.splice(index,1)\r\n      }else{\r\n        //点赞\r\n        likes.push(userId)\r\n      }\r\n\r\n      //发送到后端\r\n      await this.$axios({\r\n        method: \"post\",\r\n        url: \"/msg/like\",\r\n        data: {\r\n          parentId: item._id,\r\n          childId: thisItem._id,\r\n          likes,\r\n          childIndex\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    //回复按钮点击\r\n    async handleReplyClick(item, thisItem) {\r\n\r\n      //要收起来的情况\r\n      if (\r\n        thisItem.user._id === item.replyUser._id\r\n        && item.isShowReply\r\n      ) {\r\n        item.isShowReply = false\r\n        return\r\n      }\r\n\r\n      item.replyUser = thisItem.user\r\n      item.isShowReply = true\r\n    },\r\n\r\n    //回复框提交\r\n    async handleReplyInputClick(item) {\r\n\r\n      //回复的内容\r\n      let msg = item.replyTxt.trim()\r\n      //当前登录的用户id -- 回复人id\r\n      let user = this.userInfo._id\r\n      //回复的是谁\r\n      let reply = item.replyUser._id\r\n      if (!msg) {\r\n        return this.$message.error(\"请先输入回复内容\")\r\n      }\r\n      if (!user) {\r\n        return this.$message.error(\"请先登录！\")\r\n      }\r\n\r\n      let msgId = item._id,\r\n        child = {msg, user, reply}\r\n\r\n      let {data} = await this.$axios({\r\n        method: \"post\",\r\n        url: \"/msg/reply\",\r\n        data: {msgId, child}\r\n      })\r\n\r\n      if (data.code !== 0){\r\n        return this.$message.error(data.code)\r\n      }\r\n\r\n      //回复成功\r\n      this.$message({\r\n        type: \"success\",\r\n        message: \"回复成功\",\r\n        duration: 1000,\r\n        onClose() {\r\n          window.location.reload()\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    document.addEventListener(\"click\", () => {\r\n      this.showEmoji = false\r\n    })\r\n\r\n    this.getMsgList()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n#Message {\r\n  article {\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    margin-bottom: 15px;\r\n    box-shadow: 0 0 4px #ddd;\r\n    padding: 25px 20px;\r\n    background-color: #fff;\r\n    font-family: \"Quicksand\", \"Microsoft YaHei\", sans-serif;\r\n\r\n    &.title {\r\n      h2 {\r\n        margin-bottom: 15px;\r\n        font-size: 20px;\r\n        letter-spacing: 3px;\r\n        line-height: 24px;\r\n        border-left: 5px solid #73b899;\r\n        text-indent: 10px;\r\n      }\r\n\r\n      p {\r\n        text-indent: 2em;\r\n        color: #444;\r\n        font-size: 14px;\r\n        letter-spacing: 4px;\r\n        line-height: 30px;\r\n        margin-bottom: 20px;\r\n      }\r\n\r\n      /deep/ textarea {\r\n        height: 70px;\r\n        font-size: 12px;\r\n        letter-spacing: 2px;\r\n        font-family: \"Quicksand\", \"Microsoft YaHei\", sans-serif !important;\r\n      }\r\n\r\n      .btn {\r\n        position: relative;\r\n\r\n        > i {\r\n          float: left;\r\n          font-size: 20px;\r\n          margin-top: 5px;\r\n          cursor: pointer;\r\n        }\r\n\r\n        .el-button {\r\n          float: right;\r\n          margin-top: 5px;\r\n        }\r\n\r\n        .emoji {\r\n          position: absolute;\r\n          top: 30px;\r\n          background-color: #fff;\r\n          padding: 8px;\r\n          box-shadow: 0 0 3px #aaa;\r\n          user-select: none;\r\n\r\n          &::before {\r\n            content: \"\";\r\n            position: absolute;\r\n            z-index: 3;\r\n            top: -10px;\r\n            left: 5px;\r\n            width: 0;\r\n            height: 0;\r\n            border: 5px solid transparent;\r\n            border-bottom-color: #ccc;\r\n          }\r\n\r\n          ul {\r\n            width: 250px;\r\n            height: 150px;\r\n            border-left: 1px solid #e5e5e5;\r\n            border-bottom: 1px solid #e5e5e5;\r\n\r\n            li {\r\n              box-sizing: border-box;\r\n              float: left;\r\n              width: 25px;\r\n              height: 25px;\r\n              border-right: 1px solid #e5e5e5;\r\n              border-top: 1px solid #e5e5e5;\r\n              font-size: 18px;\r\n              line-height: 25px;\r\n              cursor: pointer;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.content {\r\n      user-select: none;\r\n      ul {\r\n        li {\r\n          padding-bottom: 5px;\r\n          margin-bottom: 10px;\r\n          border-bottom: 1px dashed #ddd;\r\n          font-size: 12px;\r\n          font-family: \"Microsoft YaHei\", \"sans-serif\";\r\n\r\n          div.parent, div.child {\r\n            display: flex;\r\n          }\r\n\r\n          div.child {\r\n            margin-left: 55px;\r\n            margin-top: 3px;\r\n          }\r\n\r\n          div.left {\r\n            overflow: hidden;\r\n            width: 40px;\r\n            height: 40px;\r\n            margin-right: 15px;\r\n            border-radius: 50%;\r\n\r\n            img {\r\n              width: 100%;\r\n              height: 100%;\r\n            }\r\n          }\r\n\r\n          div.right {\r\n            flex: 1;\r\n\r\n            div.name-time {\r\n              font-size: 12px;\r\n              margin-bottom: 3px;\r\n\r\n              span:nth-child(1) {\r\n                color: #73b899;\r\n              }\r\n\r\n              span:nth-child(2) {\r\n                color: #aaa;\r\n                margin-left: 10px;\r\n                font-family: \"Microsoft YaHei\", \"sans-serif\";\r\n              }\r\n            }\r\n\r\n            div.message {\r\n              color: #666;\r\n              letter-spacing: 2px;\r\n              margin-bottom: 3px;\r\n              word-break: break-word;\r\n\r\n              span {\r\n                color: #409eff;\r\n                margin-right: 5px;\r\n              }\r\n            }\r\n\r\n            div.like-reply {\r\n              i {\r\n                cursor: pointer;\r\n                font-size: 14px;\r\n                color: #aaa;\r\n              }\r\n              i.isLike{\r\n                color: #f30606;\r\n              }\r\n\r\n              span {\r\n                display: inline-block;\r\n                width: 43px;\r\n                font-size: 12px;\r\n                color: #aaa;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .replyInput {\r\n      box-sizing: border-box;\r\n      overflow: hidden;\r\n      width: 100%;\r\n      height: 0;\r\n      padding-left: 55px;\r\n      transition: height .3s;\r\n\r\n      &.show {\r\n        height: 50px;\r\n      }\r\n\r\n      .replyBtn {\r\n        padding: 4px 9px !important;\r\n        float: right;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":"src/views"}]}