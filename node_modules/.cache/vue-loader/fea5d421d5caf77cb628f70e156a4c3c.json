{"remainingRequest":"/Users/nile/Blob/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nile/Blob/client/src/views/Message.vue?vue&type=style&index=0&id=59f4fb3d&scoped=true&lang=less&","dependencies":[{"path":"/Users/nile/Blob/client/src/views/Message.vue","mtime":1694739477121},{"path":"/Users/nile/Blob/client/node_modules/css-loader/dist/cjs.js","mtime":1694758949820},{"path":"/Users/nile/Blob/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1694759643012},{"path":"/Users/nile/Blob/client/node_modules/postcss-loader/src/index.js","mtime":1694758950172},{"path":"/Users/nile/Blob/client/node_modules/less-loader/dist/cjs.js","mtime":1694758953616},{"path":"/Users/nile/Blob/client/node_modules/cache-loader/dist/cjs.js","mtime":1694758944082},{"path":"/Users/nile/Blob/client/node_modules/vue-loader/lib/index.js","mtime":1694759642935}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCiNNZXNzYWdlIHsNCiAgYXJ0aWNsZSB7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgIGJveC1zaGFkb3c6IDAgMCA0cHggI2RkZDsNCiAgICBwYWRkaW5nOiAyNXB4IDIwcHg7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgICBmb250LWZhbWlseTogIlF1aWNrc2FuZCIsICJNaWNyb3NvZnQgWWFIZWkiLCBzYW5zLXNlcmlmOw0KDQogICAgJi50aXRsZSB7DQogICAgICBoMiB7DQogICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7DQogICAgICAgIGZvbnQtc2l6ZTogMjBweDsNCiAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDNweDsNCiAgICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7DQogICAgICAgIGJvcmRlci1sZWZ0OiA1cHggc29saWQgIzczYjg5OTsNCiAgICAgICAgdGV4dC1pbmRlbnQ6IDEwcHg7DQogICAgICB9DQoNCiAgICAgIHAgew0KICAgICAgICB0ZXh0LWluZGVudDogMmVtOw0KICAgICAgICBjb2xvcjogIzQ0NDsNCiAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICBsZXR0ZXItc3BhY2luZzogNHB4Ow0KICAgICAgICBsaW5lLWhlaWdodDogMzBweDsNCiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsNCiAgICAgIH0NCg0KICAgICAgL2RlZXAvIHRleHRhcmVhIHsNCiAgICAgICAgaGVpZ2h0OiA3MHB4Ow0KICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgIGxldHRlci1zcGFjaW5nOiAycHg7DQogICAgICAgIGZvbnQtZmFtaWx5OiAiUXVpY2tzYW5kIiwgIk1pY3Jvc29mdCBZYUhlaSIsIHNhbnMtc2VyaWYgIWltcG9ydGFudDsNCiAgICAgIH0NCg0KICAgICAgLmJ0biB7DQogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCg0KICAgICAgICA+IGkgew0KICAgICAgICAgIGZsb2F0OiBsZWZ0Ow0KICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsNCiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7DQogICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmVsLWJ1dHRvbiB7DQogICAgICAgICAgZmxvYXQ6IHJpZ2h0Ow0KICAgICAgICAgIG1hcmdpbi10b3A6IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5lbW9qaSB7DQogICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgIHRvcDogMzBweDsNCiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgICAgICAgIHBhZGRpbmc6IDhweDsNCiAgICAgICAgICBib3gtc2hhZG93OiAwIDAgM3B4ICNhYWE7DQogICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7DQoNCiAgICAgICAgICAmOjpiZWZvcmUgew0KICAgICAgICAgICAgY29udGVudDogIiI7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICB6LWluZGV4OiAzOw0KICAgICAgICAgICAgdG9wOiAtMTBweDsNCiAgICAgICAgICAgIGxlZnQ6IDVweDsNCiAgICAgICAgICAgIHdpZHRoOiAwOw0KICAgICAgICAgICAgaGVpZ2h0OiAwOw0KICAgICAgICAgICAgYm9yZGVyOiA1cHggc29saWQgdHJhbnNwYXJlbnQ7DQogICAgICAgICAgICBib3JkZXItYm90dG9tLWNvbG9yOiAjY2NjOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHVsIHsNCiAgICAgICAgICAgIHdpZHRoOiAyNTBweDsNCiAgICAgICAgICAgIGhlaWdodDogMTUwcHg7DQogICAgICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNlNWU1ZTU7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2U1ZTVlNTsNCg0KICAgICAgICAgICAgbGkgew0KICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICAgICAgICBmbG9hdDogbGVmdDsNCiAgICAgICAgICAgICAgd2lkdGg6IDI1cHg7DQogICAgICAgICAgICAgIGhlaWdodDogMjVweDsNCiAgICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2U1ZTVlNTsNCiAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNWU1ZTU7DQogICAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDI1cHg7DQogICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICAmLmNvbnRlbnQgew0KICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7DQogICAgICB1bCB7DQogICAgICAgIGxpIHsNCiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4Ow0KICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7DQogICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZCAjZGRkOw0KICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgICBmb250LWZhbWlseTogIk1pY3Jvc29mdCBZYUhlaSIsICJzYW5zLXNlcmlmIjsNCg0KICAgICAgICAgIGRpdi5wYXJlbnQsDQogICAgICAgICAgZGl2LmNoaWxkIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgZGl2LmNoaWxkIHsNCiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA1NXB4Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogM3B4Ow0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGRpdi5sZWZ0IHsNCiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICAgICAgICB3aWR0aDogNDBweDsNCiAgICAgICAgICAgIGhlaWdodDogNDBweDsNCiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMTVweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCg0KICAgICAgICAgICAgaW1nIHsNCiAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBkaXYucmlnaHQgew0KICAgICAgICAgICAgZmxleDogMTsNCg0KICAgICAgICAgICAgZGl2Lm5hbWUtdGltZSB7DQogICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogM3B4Ow0KDQogICAgICAgICAgICAgIHNwYW46bnRoLWNoaWxkKDEpIHsNCiAgICAgICAgICAgICAgICBjb2xvcjogIzczYjg5OTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHNwYW46bnRoLWNoaWxkKDIpIHsNCiAgICAgICAgICAgICAgICBjb2xvcjogI2FhYTsNCiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDsNCiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogIk1pY3Jvc29mdCBZYUhlaSIsICJzYW5zLXNlcmlmIjsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkaXYubWVzc2FnZSB7DQogICAgICAgICAgICAgIGNvbG9yOiAjNjY2Ow0KICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMnB4Ow0KICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzcHg7DQogICAgICAgICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7DQoNCiAgICAgICAgICAgICAgc3BhbiB7DQogICAgICAgICAgICAgICAgY29sb3I6ICM0MDllZmY7DQogICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA1cHg7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZGl2Lmxpa2UtcmVwbHkgew0KICAgICAgICAgICAgICBpIHsNCiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgICAgIGNvbG9yOiAjYWFhOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGkuaXNMaWtlIHsNCiAgICAgICAgICAgICAgICBjb2xvcjogI2YzMDYwNjsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHNwYW4gew0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgICAgICAgICB3aWR0aDogNDNweDsNCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICAgICAgY29sb3I6ICNhYWE7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICAucmVwbHlJbnB1dCB7DQogICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgaGVpZ2h0OiAwOw0KICAgICAgcGFkZGluZy1sZWZ0OiA1NXB4Ow0KICAgICAgdHJhbnNpdGlvbjogaGVpZ2h0IDAuM3M7DQoNCiAgICAgICYuc2hvdyB7DQogICAgICAgIGhlaWdodDogNTBweDsNCiAgICAgIH0NCg0KICAgICAgLnJlcGx5QnRuIHsNCiAgICAgICAgcGFkZGluZzogNHB4IDlweCAhaW1wb3J0YW50Ow0KICAgICAgICBmbG9hdDogcmlnaHQ7DQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Message.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Message.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div id=\"Message\">\r\n    <article class=\"title\">\r\n      <h2>ÁïôË®ÄÊùø</h2>\r\n      <p>ËØ∑ÊñáÊòéÂèëË®ÄÔºåÁ¶ÅÊ≠¢ÂπøÂëä„ÄÇ‰∏çÁÑ∂ÊãâÈªë‰∫ÜÂó∑\\(^o^)/~</p>\r\n      <el-input\r\n        type=\"textarea\"\r\n        :rows=\"2\"\r\n        placeholder=\"ËØ∑ËæìÂÖ•ÂÜÖÂÆπ\"\r\n        maxlength=\"100\"\r\n        show-word-limit\r\n        v-model=\"textarea\"\r\n      >\r\n      </el-input>\r\n      <div class=\"btn\">\r\n        <i\r\n          class=\"iconfont icon-biaoqing\"\r\n          @click.stop=\"handleToggleEmoji\"\r\n        ></i>\r\n        <el-button\r\n          type=\"primary\"\r\n          size=\"mini\"\r\n          @click=\"handleMsgSubmit\"\r\n        >ÂèëË°®\r\n        </el-button>\r\n        <div\r\n          v-show=\"showEmoji\"\r\n          @click.stop\r\n          class=\"emoji\"\r\n        >\r\n          <ul>\r\n            <li\r\n              v-for=\"item in emoji\"\r\n              @click=\"handleEmojiClick(item)\"\r\n              :key=\"item\"\r\n            >\r\n              {{ item }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"clear\"></div>\r\n      </div>\r\n    </article>\r\n    <article class=\"content\">\r\n      <ul>\r\n        <li\r\n          v-for=\"item in msgData\"\r\n          :key=\"item.face\"\r\n        >\r\n          <!--Áà∂ÁïôË®Ä-->\r\n          <div class=\"parent\">\r\n            <!--ÁïôË®Ä-->\r\n            <div class=\"left\">\r\n              <img\r\n                :src=\"urlBase+item.user.face\"\r\n                alt=\"\"\r\n              >\r\n            </div>\r\n            <div class=\"right\">\r\n              <div class=\"name-time\">\r\n                <span>{{ item.user.user }}</span>\r\n                <span>{{ item.time | fmtTime }}</span>\r\n              </div>\r\n              <div class=\"message\">\r\n                {{ item.msg }}\r\n              </div>\r\n              <div class=\"like-reply\">\r\n                <i\r\n                  class=\"like iconfont icon-xinaixin\"\r\n                  :class=\"{\r\n                    isLike: item.likes.indexOf(userInfo._id) !== -1\r\n                  }\"\r\n                  @click=\"handleLikesClick(item, item)\"\r\n                ></i>\r\n                <span>{{ item.likes.length }}</span>\r\n                <i\r\n                  class=\"reply iconfont icon-huifu\"\r\n                  @click=\"handleReplyClick(item, item)\"\r\n                ></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!--Â≠êÁïôË®Ä-->\r\n          <div\r\n            class=\"child\"\r\n            v-for=\"(childItem,childIndex) in item.children\"\r\n            :key=\"childItem.time\"\r\n          >\r\n            <div class=\"left\">\r\n              <img\r\n                :src=\"urlBase+childItem.user.face\"\r\n                alt=\"\"\r\n              >\r\n            </div>\r\n            <div class=\"right\">\r\n              <div class=\"name-time\">\r\n                <span>{{ childItem.user.user }}</span>\r\n                <span>{{ childItem.time | fmtTime }}</span>\r\n              </div>\r\n              <div class=\"message\">\r\n                <span>@{{ childItem.reply.user }}</span>\r\n                {{ childItem.msg }}\r\n              </div>\r\n              <div class=\"like-reply\">\r\n                <i\r\n                  class=\"like iconfont icon-xinaixin\"\r\n                  :class=\"{\r\n                    isLike: childItem.likes.indexOf(userInfo._id) !== -1\r\n                  }\"\r\n                  @click=\"handleLikesClick(item, childItem, childIndex)\"\r\n                ></i>\r\n                <span>{{ childItem.likes.length }}</span>\r\n                <i\r\n                  class=\"reply iconfont icon-huifu\"\r\n                  @click=\"handleReplyClick(item, childItem)\"\r\n                ></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!--ÂõûÂ§çÊ°Ü-->\r\n          <div\r\n            class=\"replyInput\"\r\n            :class=\"{\r\n              'show': item.isShowReply\r\n            }\"\r\n          >\r\n            <el-input\r\n              v-model=\"item.replyTxt\"\r\n              :placeholder=\"'@'+item.replyUser.user\"\r\n              size=\"mini\"\r\n            ></el-input>\r\n            <el-button\r\n              class=\"replyBtn\"\r\n              type=\"primary\"\r\n              size=\"mini\"\r\n              @click=\"handleReplyInputClick(item)\"\r\n            >ÂõûÂ§ç\r\n            </el-button>\r\n            <div class=\"clear\"></div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </article>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\"\r\n\r\nexport default {\r\n  name: \"Message\",\r\n  data() {\r\n    return {\r\n      textarea: \"\",\r\n      showEmoji: false,\r\n      emoji: [\r\n        \"üòÉ\", \"üòÅ\", \"üòÇ\", \"üòä\", \"üôÉ\", \"ü•∞\", \"üòò\", \"ü§≠\", \"ü§î\", \"üòè\",\r\n        \"üòµ\", \"üòü\", \"üôÅ\", \"üò≥\", \"üò∞\", \"üò≠\", \"üòñ\", \"üò°\", \"üò†\", \"üòà\",\r\n        \"ü§°\", \"‚ò†Ô∏è\", \"üëª\", \"üôà\", \"üôâ\", \"‚ù§Ô∏è\", \"üíñ\", \"üí¢\", \"üí£\", \"üí§\",\r\n        \"üëã\", \"üëç\", \"üëå\", \"ü§û\", \"ü§ü\", \"ü§ô\", \"üëä\", \"üñï\", \"ü§ù\", \"üôè\",\r\n        \"üôÖ\", \"üôÖ‚Äç‚ôÇÔ∏è\", \"üë®‚Äç‚úàÔ∏è\", \"üë©‚Äç‚úàÔ∏è\", \"üë∑\", \"üë∑‚Äç‚ôÄÔ∏è\", \"ü§¶\", \"ü§¶‚Äç‚ôÇÔ∏è\", \"üë¥\", \"üßì\",\r\n        \"üê¥\", \"üêÆ\", \"üêñ\", \"üêë\", \"üêì\", \"ü¶ö\", \"üê≤\", \"üê≥\", \"üêü\", \"üêå\",\r\n      ],\r\n      msgData: []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['userInfo'])\r\n  },\r\n  methods: {\r\n    //ÂàáÊç¢emojiÁöÑÊòæÁ§∫‰∏éÈöêËóè\r\n    handleToggleEmoji() {\r\n      this.showEmoji = !this.showEmoji\r\n    },\r\n\r\n    //ÁÇπÂáªÊØè‰∏Ä‰∏™emojiÁöÑÊó∂ÂÄôÔºåÂä†ÂÖ•input\r\n    handleEmojiClick(item) {\r\n      this.textarea += item\r\n      this.showEmoji = false\r\n    },\r\n\r\n    //ÁïôË®ÄÊèê‰∫§\r\n    async handleMsgSubmit() {\r\n\r\n      let msg = this.textarea.trim()\r\n      let userId = this.userInfo._id\r\n      //Ê£ÄÊµãÁî®Êà∑ÊòØÂê¶ÁôªÂΩï\r\n      if (!userId) {\r\n        return this.$message.error(\"ËØ∑ÂÖàÁôªÂΩï\")\r\n      }\r\n      //Ê£ÄÊµãÁïôË®ÄÂÜÖÂÆπÊòØÂê¶‰∏∫Á©∫\r\n      if (!msg) {\r\n        return this.$message.error(\"ËØ∑ÂÖàËæìÂÖ•ÁïôË®ÄÂÜÖÂÆπ\")\r\n      }\r\n\r\n      //ÂêëÂêéÁ´ØÂèëËØ∑Ê±Ç\r\n      let { data } = await this.$axios({\r\n        method: 'post',\r\n        url: \"/msg\",\r\n        data: { msg, userId }\r\n      })\r\n\r\n      if (data.code !== 0) {\r\n        return this.$message.error(data.msg)\r\n      }\r\n\r\n      //ÁïôË®ÄÊàêÂäü\r\n      this.$message({\r\n        type: \"success\",\r\n        message: \"ÁïôË®ÄÂèëË°®ÊàêÂäü\",\r\n        duration: 1000,\r\n        onClose() {\r\n          window.location.reload()\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    //ËØ∑Ê±ÇÁïôË®ÄÊï∞ÊçÆ\r\n    async getMsgList() {\r\n      let { data: { data } } = await this.$axios({\r\n        method: 'get'\r\n        , url: \"/msg\"\r\n      })\r\n\r\n      data.filter(item => {\r\n        //Áî®Êù•Ë°®Á§∫ÊØè‰∏ÄÊù°ÁïôË®ÄÁöÑÂõûÂ§çËæìÂÖ•Ê°ÜÁöÑÂÜÖÂÆπ\r\n        item.replyTxt = \"\"\r\n        //Áî®Êù•Ë°®Á§∫ÂõûÂ§çÁöÑÊòØÂì™‰∏™\r\n        item.replyUser = { ...item.user }\r\n        //Áî®Êù•Ë°®Á§∫ÂΩìÂâçÁïôË®ÄÁöÑÂõûÂ§çÊ°ÜË¶Å‰∏çË¶ÅÊâìÂºÄ\r\n        item.isShowReply = false\r\n      })\r\n\r\n      this.msgData = data\r\n    },\r\n\r\n    //likeÁÇπÂáª\r\n    async handleLikesClick(item, thisItem, childIndex) {\r\n      //ÊòØÂê¶ÁôªÂΩï\r\n      let userId = this.userInfo._id\r\n      if (!userId) {\r\n        return this.$message.error(\"ËØ∑ÂÖàÁôªÂΩï\")\r\n      }\r\n      //ÊòØÁÇπËµûËøòÊòØÂèñÊ∂àËµû\r\n      let likes = thisItem.likes\r\n      let index = likes.indexOf(userId)\r\n      if (index !== -1) {\r\n        //ÂèñÊ∂àËµû\r\n        likes.splice(index, 1)\r\n      } else {\r\n        //ÁÇπËµû\r\n        likes.push(userId)\r\n      }\r\n\r\n      //ÂèëÈÄÅÂà∞ÂêéÁ´Ø\r\n      await this.$axios({\r\n        method: \"post\",\r\n        url: \"/msg/like\",\r\n        data: {\r\n          parentId: item._id,\r\n          childId: thisItem._id,\r\n          likes,\r\n          childIndex\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    //ÂõûÂ§çÊåâÈíÆÁÇπÂáª\r\n    async handleReplyClick(item, thisItem) {\r\n\r\n      //Ë¶ÅÊî∂Ëµ∑Êù•ÁöÑÊÉÖÂÜµ\r\n      if (\r\n        thisItem.user._id === item.replyUser._id\r\n        && item.isShowReply\r\n      ) {\r\n        item.isShowReply = false\r\n        return\r\n      }\r\n\r\n      item.replyUser = thisItem.user\r\n      item.isShowReply = true\r\n    },\r\n\r\n    //ÂõûÂ§çÊ°ÜÊèê‰∫§\r\n    async handleReplyInputClick(item) {\r\n\r\n      //ÂõûÂ§çÁöÑÂÜÖÂÆπ\r\n      let msg = item.replyTxt.trim()\r\n      //ÂΩìÂâçÁôªÂΩïÁöÑÁî®Êà∑id -- ÂõûÂ§ç‰∫∫id\r\n      let user = this.userInfo._id\r\n      //ÂõûÂ§çÁöÑÊòØË∞Å\r\n      let reply = item.replyUser._id\r\n      if (!msg) {\r\n        return this.$message.error(\"ËØ∑ÂÖàËæìÂÖ•ÂõûÂ§çÂÜÖÂÆπ\")\r\n      }\r\n      if (!user) {\r\n        return this.$message.error(\"ËØ∑ÂÖàÁôªÂΩïÔºÅ\")\r\n      }\r\n\r\n      let msgId = item._id,\r\n        child = { msg, user, reply }\r\n\r\n      let { data } = await this.$axios({\r\n        method: \"post\",\r\n        url: \"/msg/reply\",\r\n        data: { msgId, child }\r\n      })\r\n\r\n      if (data.code !== 0) {\r\n        return this.$message.error(data.code)\r\n      }\r\n\r\n      //ÂõûÂ§çÊàêÂäü\r\n      this.$message({\r\n        type: \"success\",\r\n        message: \"ÂõûÂ§çÊàêÂäü\",\r\n        duration: 1000,\r\n        onClose() {\r\n          window.location.reload()\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    document.addEventListener(\"click\", () => {\r\n      this.showEmoji = false\r\n    })\r\n\r\n    this.getMsgList()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n#Message {\r\n  article {\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    margin-bottom: 15px;\r\n    box-shadow: 0 0 4px #ddd;\r\n    padding: 25px 20px;\r\n    background-color: #fff;\r\n    font-family: \"Quicksand\", \"Microsoft YaHei\", sans-serif;\r\n\r\n    &.title {\r\n      h2 {\r\n        margin-bottom: 15px;\r\n        font-size: 20px;\r\n        letter-spacing: 3px;\r\n        line-height: 24px;\r\n        border-left: 5px solid #73b899;\r\n        text-indent: 10px;\r\n      }\r\n\r\n      p {\r\n        text-indent: 2em;\r\n        color: #444;\r\n        font-size: 14px;\r\n        letter-spacing: 4px;\r\n        line-height: 30px;\r\n        margin-bottom: 20px;\r\n      }\r\n\r\n      /deep/ textarea {\r\n        height: 70px;\r\n        font-size: 12px;\r\n        letter-spacing: 2px;\r\n        font-family: \"Quicksand\", \"Microsoft YaHei\", sans-serif !important;\r\n      }\r\n\r\n      .btn {\r\n        position: relative;\r\n\r\n        > i {\r\n          float: left;\r\n          font-size: 20px;\r\n          margin-top: 5px;\r\n          cursor: pointer;\r\n        }\r\n\r\n        .el-button {\r\n          float: right;\r\n          margin-top: 5px;\r\n        }\r\n\r\n        .emoji {\r\n          position: absolute;\r\n          top: 30px;\r\n          background-color: #fff;\r\n          padding: 8px;\r\n          box-shadow: 0 0 3px #aaa;\r\n          user-select: none;\r\n\r\n          &::before {\r\n            content: \"\";\r\n            position: absolute;\r\n            z-index: 3;\r\n            top: -10px;\r\n            left: 5px;\r\n            width: 0;\r\n            height: 0;\r\n            border: 5px solid transparent;\r\n            border-bottom-color: #ccc;\r\n          }\r\n\r\n          ul {\r\n            width: 250px;\r\n            height: 150px;\r\n            border-left: 1px solid #e5e5e5;\r\n            border-bottom: 1px solid #e5e5e5;\r\n\r\n            li {\r\n              box-sizing: border-box;\r\n              float: left;\r\n              width: 25px;\r\n              height: 25px;\r\n              border-right: 1px solid #e5e5e5;\r\n              border-top: 1px solid #e5e5e5;\r\n              font-size: 18px;\r\n              line-height: 25px;\r\n              cursor: pointer;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.content {\r\n      user-select: none;\r\n      ul {\r\n        li {\r\n          padding-bottom: 5px;\r\n          margin-bottom: 10px;\r\n          border-bottom: 1px dashed #ddd;\r\n          font-size: 12px;\r\n          font-family: \"Microsoft YaHei\", \"sans-serif\";\r\n\r\n          div.parent,\r\n          div.child {\r\n            display: flex;\r\n          }\r\n\r\n          div.child {\r\n            margin-left: 55px;\r\n            margin-top: 3px;\r\n          }\r\n\r\n          div.left {\r\n            overflow: hidden;\r\n            width: 40px;\r\n            height: 40px;\r\n            margin-right: 15px;\r\n            border-radius: 50%;\r\n\r\n            img {\r\n              width: 100%;\r\n              height: 100%;\r\n            }\r\n          }\r\n\r\n          div.right {\r\n            flex: 1;\r\n\r\n            div.name-time {\r\n              font-size: 12px;\r\n              margin-bottom: 3px;\r\n\r\n              span:nth-child(1) {\r\n                color: #73b899;\r\n              }\r\n\r\n              span:nth-child(2) {\r\n                color: #aaa;\r\n                margin-left: 10px;\r\n                font-family: \"Microsoft YaHei\", \"sans-serif\";\r\n              }\r\n            }\r\n\r\n            div.message {\r\n              color: #666;\r\n              letter-spacing: 2px;\r\n              margin-bottom: 3px;\r\n              word-break: break-word;\r\n\r\n              span {\r\n                color: #409eff;\r\n                margin-right: 5px;\r\n              }\r\n            }\r\n\r\n            div.like-reply {\r\n              i {\r\n                cursor: pointer;\r\n                font-size: 14px;\r\n                color: #aaa;\r\n              }\r\n              i.isLike {\r\n                color: #f30606;\r\n              }\r\n\r\n              span {\r\n                display: inline-block;\r\n                width: 43px;\r\n                font-size: 12px;\r\n                color: #aaa;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .replyInput {\r\n      box-sizing: border-box;\r\n      overflow: hidden;\r\n      width: 100%;\r\n      height: 0;\r\n      padding-left: 55px;\r\n      transition: height 0.3s;\r\n\r\n      &.show {\r\n        height: 50px;\r\n      }\r\n\r\n      .replyBtn {\r\n        padding: 4px 9px !important;\r\n        float: right;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}]}