{"remainingRequest":"/Users/nile/Blob/client/node_modules/babel-loader/lib/index.js!/Users/nile/Blob/client/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nile/Blob/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nile/Blob/client/src/views/Message.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nile/Blob/client/src/views/Message.vue","mtime":1694739477121},{"path":"/Users/nile/Blob/client/babel.config.js","mtime":1670838334534},{"path":"/Users/nile/Blob/client/node_modules/cache-loader/dist/cjs.js","mtime":1694758944082},{"path":"/Users/nile/Blob/client/node_modules/babel-loader/lib/index.js","mtime":1681398123605},{"path":"/Users/nile/Blob/client/node_modules/cache-loader/dist/cjs.js","mtime":1694758944082},{"path":"/Users/nile/Blob/client/node_modules/vue-loader/lib/index.js","mtime":1694570286908}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWVzc2FnZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRleHRhcmVhOiAiIiwKICAgICAgc2hvd0Vtb2ppOiBmYWxzZSwKICAgICAgZW1vamk6IFsi8J+YgyIsICLwn5iBIiwgIvCfmIIiLCAi8J+YiiIsICLwn5mDIiwgIvCfpbAiLCAi8J+YmCIsICLwn6StIiwgIvCfpJQiLCAi8J+YjyIsICLwn5i1IiwgIvCfmJ8iLCAi8J+ZgSIsICLwn5izIiwgIvCfmLAiLCAi8J+YrSIsICLwn5iWIiwgIvCfmKEiLCAi8J+YoCIsICLwn5iIIiwgIvCfpKEiLCAi4pig77iPIiwgIvCfkbsiLCAi8J+ZiCIsICLwn5mJIiwgIuKdpO+4jyIsICLwn5KWIiwgIvCfkqIiLCAi8J+SoyIsICLwn5KkIiwgIvCfkYsiLCAi8J+RjSIsICLwn5GMIiwgIvCfpJ4iLCAi8J+knyIsICLwn6SZIiwgIvCfkYoiLCAi8J+WlSIsICLwn6SdIiwgIvCfmY8iLCAi8J+ZhSIsICLwn5mF4oCN4pmC77iPIiwgIvCfkajigI3inIjvuI8iLCAi8J+RqeKAjeKciO+4jyIsICLwn5G3IiwgIvCfkbfigI3imYDvuI8iLCAi8J+kpiIsICLwn6Sm4oCN4pmC77iPIiwgIvCfkbQiLCAi8J+nkyIsICLwn5C0IiwgIvCfkK4iLCAi8J+QliIsICLwn5CRIiwgIvCfkJMiLCAi8J+mmiIsICLwn5CyIiwgIvCfkLMiLCAi8J+QnyIsICLwn5CMIl0sCiAgICAgIG1zZ0RhdGE6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKFsndXNlckluZm8nXSkKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5YiH5o2iZW1vamnnmoTmmL7npLrkuI7pmpDol48KICAgIGhhbmRsZVRvZ2dsZUVtb2ppKCkgewogICAgICB0aGlzLnNob3dFbW9qaSA9ICF0aGlzLnNob3dFbW9qaTsKICAgIH0sCiAgICAvL+eCueWHu+avj+S4gOS4qmVtb2pp55qE5pe25YCZ77yM5Yqg5YWlaW5wdXQKICAgIGhhbmRsZUVtb2ppQ2xpY2soaXRlbSkgewogICAgICB0aGlzLnRleHRhcmVhICs9IGl0ZW07CiAgICAgIHRoaXMuc2hvd0Vtb2ppID0gZmFsc2U7CiAgICB9LAogICAgLy/nlZnoqIDmj5DkuqQKICAgIGFzeW5jIGhhbmRsZU1zZ1N1Ym1pdCgpIHsKICAgICAgbGV0IG1zZyA9IHRoaXMudGV4dGFyZWEudHJpbSgpOwogICAgICBsZXQgdXNlcklkID0gdGhpcy51c2VySW5mby5faWQ7CiAgICAgIC8v5qOA5rWL55So5oi35piv5ZCm55m75b2VCiAgICAgIGlmICghdXNlcklkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+WFiOeZu+W9lSIpOwogICAgICB9CiAgICAgIC8v5qOA5rWL55WZ6KiA5YaF5a655piv5ZCm5Li656m6CiAgICAgIGlmICghbXNnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+WFiOi+k+WFpeeVmeiogOWGheWuuSIpOwogICAgICB9CgogICAgICAvL+WQkeWQjuerr+WPkeivt+axggogICAgICBsZXQgewogICAgICAgIGRhdGEKICAgICAgfSA9IGF3YWl0IHRoaXMuJGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICB1cmw6ICIvbXNnIiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBtc2csCiAgICAgICAgICB1c2VySWQKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoZGF0YS5jb2RlICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5tc2cpOwogICAgICB9CgogICAgICAvL+eVmeiogOaIkOWKnwogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgbWVzc2FnZTogIueVmeiogOWPkeihqOaIkOWKnyIsCiAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgb25DbG9zZSgpIHsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v6K+35rGC55WZ6KiA5pWw5o2uCiAgICBhc3luYyBnZXRNc2dMaXN0KCkgewogICAgICBsZXQgewogICAgICAgIGRhdGE6IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9CiAgICAgIH0gPSBhd2FpdCB0aGlzLiRheGlvcyh7CiAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICB1cmw6ICIvbXNnIgogICAgICB9KTsKICAgICAgZGF0YS5maWx0ZXIoaXRlbSA9PiB7CiAgICAgICAgLy/nlKjmnaXooajnpLrmr4/kuIDmnaHnlZnoqIDnmoTlm57lpI3ovpPlhaXmoYbnmoTlhoXlrrkKICAgICAgICBpdGVtLnJlcGx5VHh0ID0gIiI7CiAgICAgICAgLy/nlKjmnaXooajnpLrlm57lpI3nmoTmmK/lk6rkuKoKICAgICAgICBpdGVtLnJlcGx5VXNlciA9IHsKICAgICAgICAgIC4uLml0ZW0udXNlcgogICAgICAgIH07CiAgICAgICAgLy/nlKjmnaXooajnpLrlvZPliY3nlZnoqIDnmoTlm57lpI3moYbopoHkuI3opoHmiZPlvIAKICAgICAgICBpdGVtLmlzU2hvd1JlcGx5ID0gZmFsc2U7CiAgICAgIH0pOwogICAgICB0aGlzLm1zZ0RhdGEgPSBkYXRhOwogICAgfSwKICAgIC8vbGlrZeeCueWHuwogICAgYXN5bmMgaGFuZGxlTGlrZXNDbGljayhpdGVtLCB0aGlzSXRlbSwgY2hpbGRJbmRleCkgewogICAgICAvL+aYr+WQpueZu+W9lQogICAgICBsZXQgdXNlcklkID0gdGhpcy51c2VySW5mby5faWQ7CiAgICAgIGlmICghdXNlcklkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+WFiOeZu+W9lSIpOwogICAgICB9CiAgICAgIC8v5piv54K56LWe6L+Y5piv5Y+W5raI6LWeCiAgICAgIGxldCBsaWtlcyA9IHRoaXNJdGVtLmxpa2VzOwogICAgICBsZXQgaW5kZXggPSBsaWtlcy5pbmRleE9mKHVzZXJJZCk7CiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICAvL+WPlua2iOi1ngogICAgICAgIGxpa2VzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/ngrnotZ4KICAgICAgICBsaWtlcy5wdXNoKHVzZXJJZCk7CiAgICAgIH0KCiAgICAgIC8v5Y+R6YCB5Yiw5ZCO56uvCiAgICAgIGF3YWl0IHRoaXMuJGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICB1cmw6ICIvbXNnL2xpa2UiLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHBhcmVudElkOiBpdGVtLl9pZCwKICAgICAgICAgIGNoaWxkSWQ6IHRoaXNJdGVtLl9pZCwKICAgICAgICAgIGxpa2VzLAogICAgICAgICAgY2hpbGRJbmRleAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/lm57lpI3mjInpkq7ngrnlh7sKICAgIGFzeW5jIGhhbmRsZVJlcGx5Q2xpY2soaXRlbSwgdGhpc0l0ZW0pIHsKICAgICAgLy/opoHmlLbotbfmnaXnmoTmg4XlhrUKICAgICAgaWYgKHRoaXNJdGVtLnVzZXIuX2lkID09PSBpdGVtLnJlcGx5VXNlci5faWQgJiYgaXRlbS5pc1Nob3dSZXBseSkgewogICAgICAgIGl0ZW0uaXNTaG93UmVwbHkgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaXRlbS5yZXBseVVzZXIgPSB0aGlzSXRlbS51c2VyOwogICAgICBpdGVtLmlzU2hvd1JlcGx5ID0gdHJ1ZTsKICAgIH0sCiAgICAvL+WbnuWkjeahhuaPkOS6pAogICAgYXN5bmMgaGFuZGxlUmVwbHlJbnB1dENsaWNrKGl0ZW0pIHsKICAgICAgLy/lm57lpI3nmoTlhoXlrrkKICAgICAgbGV0IG1zZyA9IGl0ZW0ucmVwbHlUeHQudHJpbSgpOwogICAgICAvL+W9k+WJjeeZu+W9leeahOeUqOaIt2lkIC0tIOWbnuWkjeS6umlkCiAgICAgIGxldCB1c2VyID0gdGhpcy51c2VySW5mby5faWQ7CiAgICAgIC8v5Zue5aSN55qE5piv6LCBCiAgICAgIGxldCByZXBseSA9IGl0ZW0ucmVwbHlVc2VyLl9pZDsKICAgICAgaWYgKCFtc2cpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+35YWI6L6T5YWl5Zue5aSN5YaF5a65Iik7CiAgICAgIH0KICAgICAgaWYgKCF1c2VyKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+WFiOeZu+W9le+8gSIpOwogICAgICB9CiAgICAgIGxldCBtc2dJZCA9IGl0ZW0uX2lkLAogICAgICAgIGNoaWxkID0gewogICAgICAgICAgbXNnLAogICAgICAgICAgdXNlciwKICAgICAgICAgIHJlcGx5CiAgICAgICAgfTsKICAgICAgbGV0IHsKICAgICAgICBkYXRhCiAgICAgIH0gPSBhd2FpdCB0aGlzLiRheGlvcyh7CiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgdXJsOiAiL21zZy9yZXBseSIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgbXNnSWQsCiAgICAgICAgICBjaGlsZAogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChkYXRhLmNvZGUgIT09IDApIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLmNvZGUpOwogICAgICB9CgogICAgICAvL+WbnuWkjeaIkOWKnwogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgbWVzc2FnZTogIuWbnuWkjeaIkOWKnyIsCiAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgb25DbG9zZSgpIHsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewogICAgICB0aGlzLnNob3dFbW9qaSA9IGZhbHNlOwogICAgfSk7CiAgICB0aGlzLmdldE1zZ0xpc3QoKTsKICB9Cn07"},{"version":3,"names":["mapState","name","data","textarea","showEmoji","emoji","msgData","computed","methods","handleToggleEmoji","handleEmojiClick","item","handleMsgSubmit","msg","trim","userId","userInfo","_id","$message","error","$axios","method","url","code","type","message","duration","onClose","window","location","reload","getMsgList","filter","replyTxt","replyUser","user","isShowReply","handleLikesClick","thisItem","childIndex","likes","index","indexOf","splice","push","parentId","childId","handleReplyClick","handleReplyInputClick","reply","msgId","child","mounted","document","addEventListener"],"sources":["src/views/Message.vue"],"sourcesContent":["<template>\r\n  <div id=\"Message\">\r\n    <article class=\"title\">\r\n      <h2>留言板</h2>\r\n      <p>请文明发言，禁止广告。不然拉黑了嗷\\(^o^)/~</p>\r\n      <el-input\r\n        type=\"textarea\"\r\n        :rows=\"2\"\r\n        placeholder=\"请输入内容\"\r\n        maxlength=\"100\"\r\n        show-word-limit\r\n        v-model=\"textarea\"\r\n      >\r\n      </el-input>\r\n      <div class=\"btn\">\r\n        <i\r\n          class=\"iconfont icon-biaoqing\"\r\n          @click.stop=\"handleToggleEmoji\"\r\n        ></i>\r\n        <el-button\r\n          type=\"primary\"\r\n          size=\"mini\"\r\n          @click=\"handleMsgSubmit\"\r\n        >发表\r\n        </el-button>\r\n        <div\r\n          v-show=\"showEmoji\"\r\n          @click.stop\r\n          class=\"emoji\"\r\n        >\r\n          <ul>\r\n            <li\r\n              v-for=\"item in emoji\"\r\n              @click=\"handleEmojiClick(item)\"\r\n              :key=\"item\"\r\n            >\r\n              {{ item }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"clear\"></div>\r\n      </div>\r\n    </article>\r\n    <article class=\"content\">\r\n      <ul>\r\n        <li\r\n          v-for=\"item in msgData\"\r\n          :key=\"item.face\"\r\n        >\r\n          <!--父留言-->\r\n          <div class=\"parent\">\r\n            <!--留言-->\r\n            <div class=\"left\">\r\n              <img\r\n                :src=\"urlBase+item.user.face\"\r\n                alt=\"\"\r\n              >\r\n            </div>\r\n            <div class=\"right\">\r\n              <div class=\"name-time\">\r\n                <span>{{ item.user.user }}</span>\r\n                <span>{{ item.time | fmtTime }}</span>\r\n              </div>\r\n              <div class=\"message\">\r\n                {{ item.msg }}\r\n              </div>\r\n              <div class=\"like-reply\">\r\n                <i\r\n                  class=\"like iconfont icon-xinaixin\"\r\n                  :class=\"{\r\n                    isLike: item.likes.indexOf(userInfo._id) !== -1\r\n                  }\"\r\n                  @click=\"handleLikesClick(item, item)\"\r\n                ></i>\r\n                <span>{{ item.likes.length }}</span>\r\n                <i\r\n                  class=\"reply iconfont icon-huifu\"\r\n                  @click=\"handleReplyClick(item, item)\"\r\n                ></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!--子留言-->\r\n          <div\r\n            class=\"child\"\r\n            v-for=\"(childItem,childIndex) in item.children\"\r\n            :key=\"childItem.time\"\r\n          >\r\n            <div class=\"left\">\r\n              <img\r\n                :src=\"urlBase+childItem.user.face\"\r\n                alt=\"\"\r\n              >\r\n            </div>\r\n            <div class=\"right\">\r\n              <div class=\"name-time\">\r\n                <span>{{ childItem.user.user }}</span>\r\n                <span>{{ childItem.time | fmtTime }}</span>\r\n              </div>\r\n              <div class=\"message\">\r\n                <span>@{{ childItem.reply.user }}</span>\r\n                {{ childItem.msg }}\r\n              </div>\r\n              <div class=\"like-reply\">\r\n                <i\r\n                  class=\"like iconfont icon-xinaixin\"\r\n                  :class=\"{\r\n                    isLike: childItem.likes.indexOf(userInfo._id) !== -1\r\n                  }\"\r\n                  @click=\"handleLikesClick(item, childItem, childIndex)\"\r\n                ></i>\r\n                <span>{{ childItem.likes.length }}</span>\r\n                <i\r\n                  class=\"reply iconfont icon-huifu\"\r\n                  @click=\"handleReplyClick(item, childItem)\"\r\n                ></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!--回复框-->\r\n          <div\r\n            class=\"replyInput\"\r\n            :class=\"{\r\n              'show': item.isShowReply\r\n            }\"\r\n          >\r\n            <el-input\r\n              v-model=\"item.replyTxt\"\r\n              :placeholder=\"'@'+item.replyUser.user\"\r\n              size=\"mini\"\r\n            ></el-input>\r\n            <el-button\r\n              class=\"replyBtn\"\r\n              type=\"primary\"\r\n              size=\"mini\"\r\n              @click=\"handleReplyInputClick(item)\"\r\n            >回复\r\n            </el-button>\r\n            <div class=\"clear\"></div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </article>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\"\r\n\r\nexport default {\r\n  name: \"Message\",\r\n  data() {\r\n    return {\r\n      textarea: \"\",\r\n      showEmoji: false,\r\n      emoji: [\r\n        \"😃\", \"😁\", \"😂\", \"😊\", \"🙃\", \"🥰\", \"😘\", \"🤭\", \"🤔\", \"😏\",\r\n        \"😵\", \"😟\", \"🙁\", \"😳\", \"😰\", \"😭\", \"😖\", \"😡\", \"😠\", \"😈\",\r\n        \"🤡\", \"☠️\", \"👻\", \"🙈\", \"🙉\", \"❤️\", \"💖\", \"💢\", \"💣\", \"💤\",\r\n        \"👋\", \"👍\", \"👌\", \"🤞\", \"🤟\", \"🤙\", \"👊\", \"🖕\", \"🤝\", \"🙏\",\r\n        \"🙅\", \"🙅‍♂️\", \"👨‍✈️\", \"👩‍✈️\", \"👷\", \"👷‍♀️\", \"🤦\", \"🤦‍♂️\", \"👴\", \"🧓\",\r\n        \"🐴\", \"🐮\", \"🐖\", \"🐑\", \"🐓\", \"🦚\", \"🐲\", \"🐳\", \"🐟\", \"🐌\",\r\n      ],\r\n      msgData: []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['userInfo'])\r\n  },\r\n  methods: {\r\n    //切换emoji的显示与隐藏\r\n    handleToggleEmoji() {\r\n      this.showEmoji = !this.showEmoji\r\n    },\r\n\r\n    //点击每一个emoji的时候，加入input\r\n    handleEmojiClick(item) {\r\n      this.textarea += item\r\n      this.showEmoji = false\r\n    },\r\n\r\n    //留言提交\r\n    async handleMsgSubmit() {\r\n\r\n      let msg = this.textarea.trim()\r\n      let userId = this.userInfo._id\r\n      //检测用户是否登录\r\n      if (!userId) {\r\n        return this.$message.error(\"请先登录\")\r\n      }\r\n      //检测留言内容是否为空\r\n      if (!msg) {\r\n        return this.$message.error(\"请先输入留言内容\")\r\n      }\r\n\r\n      //向后端发请求\r\n      let { data } = await this.$axios({\r\n        method: 'post',\r\n        url: \"/msg\",\r\n        data: { msg, userId }\r\n      })\r\n\r\n      if (data.code !== 0) {\r\n        return this.$message.error(data.msg)\r\n      }\r\n\r\n      //留言成功\r\n      this.$message({\r\n        type: \"success\",\r\n        message: \"留言发表成功\",\r\n        duration: 1000,\r\n        onClose() {\r\n          window.location.reload()\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    //请求留言数据\r\n    async getMsgList() {\r\n      let { data: { data } } = await this.$axios({\r\n        method: 'get'\r\n        , url: \"/msg\"\r\n      })\r\n\r\n      data.filter(item => {\r\n        //用来表示每一条留言的回复输入框的内容\r\n        item.replyTxt = \"\"\r\n        //用来表示回复的是哪个\r\n        item.replyUser = { ...item.user }\r\n        //用来表示当前留言的回复框要不要打开\r\n        item.isShowReply = false\r\n      })\r\n\r\n      this.msgData = data\r\n    },\r\n\r\n    //like点击\r\n    async handleLikesClick(item, thisItem, childIndex) {\r\n      //是否登录\r\n      let userId = this.userInfo._id\r\n      if (!userId) {\r\n        return this.$message.error(\"请先登录\")\r\n      }\r\n      //是点赞还是取消赞\r\n      let likes = thisItem.likes\r\n      let index = likes.indexOf(userId)\r\n      if (index !== -1) {\r\n        //取消赞\r\n        likes.splice(index, 1)\r\n      } else {\r\n        //点赞\r\n        likes.push(userId)\r\n      }\r\n\r\n      //发送到后端\r\n      await this.$axios({\r\n        method: \"post\",\r\n        url: \"/msg/like\",\r\n        data: {\r\n          parentId: item._id,\r\n          childId: thisItem._id,\r\n          likes,\r\n          childIndex\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    //回复按钮点击\r\n    async handleReplyClick(item, thisItem) {\r\n\r\n      //要收起来的情况\r\n      if (\r\n        thisItem.user._id === item.replyUser._id\r\n        && item.isShowReply\r\n      ) {\r\n        item.isShowReply = false\r\n        return\r\n      }\r\n\r\n      item.replyUser = thisItem.user\r\n      item.isShowReply = true\r\n    },\r\n\r\n    //回复框提交\r\n    async handleReplyInputClick(item) {\r\n\r\n      //回复的内容\r\n      let msg = item.replyTxt.trim()\r\n      //当前登录的用户id -- 回复人id\r\n      let user = this.userInfo._id\r\n      //回复的是谁\r\n      let reply = item.replyUser._id\r\n      if (!msg) {\r\n        return this.$message.error(\"请先输入回复内容\")\r\n      }\r\n      if (!user) {\r\n        return this.$message.error(\"请先登录！\")\r\n      }\r\n\r\n      let msgId = item._id,\r\n        child = { msg, user, reply }\r\n\r\n      let { data } = await this.$axios({\r\n        method: \"post\",\r\n        url: \"/msg/reply\",\r\n        data: { msgId, child }\r\n      })\r\n\r\n      if (data.code !== 0) {\r\n        return this.$message.error(data.code)\r\n      }\r\n\r\n      //回复成功\r\n      this.$message({\r\n        type: \"success\",\r\n        message: \"回复成功\",\r\n        duration: 1000,\r\n        onClose() {\r\n          window.location.reload()\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    document.addEventListener(\"click\", () => {\r\n      this.showEmoji = false\r\n    })\r\n\r\n    this.getMsgList()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n#Message {\r\n  article {\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    margin-bottom: 15px;\r\n    box-shadow: 0 0 4px #ddd;\r\n    padding: 25px 20px;\r\n    background-color: #fff;\r\n    font-family: \"Quicksand\", \"Microsoft YaHei\", sans-serif;\r\n\r\n    &.title {\r\n      h2 {\r\n        margin-bottom: 15px;\r\n        font-size: 20px;\r\n        letter-spacing: 3px;\r\n        line-height: 24px;\r\n        border-left: 5px solid #73b899;\r\n        text-indent: 10px;\r\n      }\r\n\r\n      p {\r\n        text-indent: 2em;\r\n        color: #444;\r\n        font-size: 14px;\r\n        letter-spacing: 4px;\r\n        line-height: 30px;\r\n        margin-bottom: 20px;\r\n      }\r\n\r\n      /deep/ textarea {\r\n        height: 70px;\r\n        font-size: 12px;\r\n        letter-spacing: 2px;\r\n        font-family: \"Quicksand\", \"Microsoft YaHei\", sans-serif !important;\r\n      }\r\n\r\n      .btn {\r\n        position: relative;\r\n\r\n        > i {\r\n          float: left;\r\n          font-size: 20px;\r\n          margin-top: 5px;\r\n          cursor: pointer;\r\n        }\r\n\r\n        .el-button {\r\n          float: right;\r\n          margin-top: 5px;\r\n        }\r\n\r\n        .emoji {\r\n          position: absolute;\r\n          top: 30px;\r\n          background-color: #fff;\r\n          padding: 8px;\r\n          box-shadow: 0 0 3px #aaa;\r\n          user-select: none;\r\n\r\n          &::before {\r\n            content: \"\";\r\n            position: absolute;\r\n            z-index: 3;\r\n            top: -10px;\r\n            left: 5px;\r\n            width: 0;\r\n            height: 0;\r\n            border: 5px solid transparent;\r\n            border-bottom-color: #ccc;\r\n          }\r\n\r\n          ul {\r\n            width: 250px;\r\n            height: 150px;\r\n            border-left: 1px solid #e5e5e5;\r\n            border-bottom: 1px solid #e5e5e5;\r\n\r\n            li {\r\n              box-sizing: border-box;\r\n              float: left;\r\n              width: 25px;\r\n              height: 25px;\r\n              border-right: 1px solid #e5e5e5;\r\n              border-top: 1px solid #e5e5e5;\r\n              font-size: 18px;\r\n              line-height: 25px;\r\n              cursor: pointer;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.content {\r\n      user-select: none;\r\n      ul {\r\n        li {\r\n          padding-bottom: 5px;\r\n          margin-bottom: 10px;\r\n          border-bottom: 1px dashed #ddd;\r\n          font-size: 12px;\r\n          font-family: \"Microsoft YaHei\", \"sans-serif\";\r\n\r\n          div.parent,\r\n          div.child {\r\n            display: flex;\r\n          }\r\n\r\n          div.child {\r\n            margin-left: 55px;\r\n            margin-top: 3px;\r\n          }\r\n\r\n          div.left {\r\n            overflow: hidden;\r\n            width: 40px;\r\n            height: 40px;\r\n            margin-right: 15px;\r\n            border-radius: 50%;\r\n\r\n            img {\r\n              width: 100%;\r\n              height: 100%;\r\n            }\r\n          }\r\n\r\n          div.right {\r\n            flex: 1;\r\n\r\n            div.name-time {\r\n              font-size: 12px;\r\n              margin-bottom: 3px;\r\n\r\n              span:nth-child(1) {\r\n                color: #73b899;\r\n              }\r\n\r\n              span:nth-child(2) {\r\n                color: #aaa;\r\n                margin-left: 10px;\r\n                font-family: \"Microsoft YaHei\", \"sans-serif\";\r\n              }\r\n            }\r\n\r\n            div.message {\r\n              color: #666;\r\n              letter-spacing: 2px;\r\n              margin-bottom: 3px;\r\n              word-break: break-word;\r\n\r\n              span {\r\n                color: #409eff;\r\n                margin-right: 5px;\r\n              }\r\n            }\r\n\r\n            div.like-reply {\r\n              i {\r\n                cursor: pointer;\r\n                font-size: 14px;\r\n                color: #aaa;\r\n              }\r\n              i.isLike {\r\n                color: #f30606;\r\n              }\r\n\r\n              span {\r\n                display: inline-block;\r\n                width: 43px;\r\n                font-size: 12px;\r\n                color: #aaa;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .replyInput {\r\n      box-sizing: border-box;\r\n      overflow: hidden;\r\n      width: 100%;\r\n      height: 0;\r\n      padding-left: 55px;\r\n      transition: height 0.3s;\r\n\r\n      &.show {\r\n        height: 50px;\r\n      }\r\n\r\n      .replyBtn {\r\n        padding: 4px 9px !important;\r\n        float: right;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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"}]}